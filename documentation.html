<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Manual: Compliance Workflow Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.8;
            color: #343a40;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
        }
        main {
            max-width: 800px;
            margin: 20px auto;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            padding: 2rem 3rem;
        }
        header {
            text-align: center;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        h1 {
            color: #2c3e50;
            margin: 0 0 10px 0;
            font-size: 2.5rem;
        }
        h2 {
            color: #4a6cf7;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 10px;
            margin-top: 40px;
            font-size: 1.8rem;
        }
        h3 {
            color: #495057;
            margin-top: 30px;
            font-size: 1.3rem;
        }
        p, li {
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: #495057;
        }
        .note {
            background-color: #e7f5ff;
            border-left: 5px solid #4a6cf7;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        ul {
            padding-left: 25px;
            list-style-type: none;
        }
        li {
            padding-left: 1.4em;
            text-indent: -1.4em;
        }
        li::before {
            content: "\f058"; /* Font Awesome check-square icon */
            font-family: "Font Awesome 6 Free";
            font-weight: 900;
            margin-right: 10px;
            color: #10b981;
        }
        strong {
            color: #343a40;
        }
        .app-button {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 25px;
            background-color: #4a6cf7;
            color: #ffffff;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.2s;
            font-size: 1.1rem;
        }
        .app-button:hover {
            opacity: 0.85;
        }
        .key-icon {
            display: inline-block;
            padding: 2px 6px;
            background-color: #e9ecef;
            border-radius: 4px;
            border: 1px solid #ced4da;
            font-family: monospace;
            font-size: 0.9em;
            color: #495057;
        }
        .icon-example {
            font-size: 1em;
            width: 24px;
            display: inline-block;
            text-align: center;
        }
    </style>
</head>
<body>
    <main>
        <header>
            <h1>User Manual</h1>
            <p>Your complete guide to the Compliance Workflow Manager</p>
            <a href="index.html" class="app-button">Go to Application</a>
        </header>

        <section>
            <h2>1. Core Concepts & Interface</h2>
            <p>This application is designed to manage complex compliance workflows using a structured, three-level hierarchy.</p>
            <ul>
                <li><strong>Roles:</strong> The highest level. A Role represents a major area of responsibility or a compliance framework (e.g., "ID.AM - Asset Management").</li>
                <li><strong>Actions:</strong> The children of a Role. An Action is a specific task or objective you need to accomplish within that Role (e.g., "ID.AM-1: Inventory of Assets").</li>
                <li><strong>Evidence:</strong> The children of an Action. Evidence items are the concrete proof and sub-tasks required to complete an Action (e.g., "ID.AM-1.1: Document Inventory").</li>
            </ul>

            <h3>The Two-Pane Layout</h3>
            <p>The main screen is a two-pane view. The left pane shows a list of **Actions** for a given Role. Clicking an Action on the left will display its corresponding **Evidence** items in the right pane. This keeps your workspace focused.</p>

            <h3>Two Modes of Operation</h3>
            <p>The application has two distinct modes, switched using the toggle in the header. The application defaults to Dark Theme for new users.</p>
            <ul>
                <li><strong>Execution Mode (Default):</strong> For performing the workflow. The interface is clean and focused on completing Evidence tasks.</li>
                <li><strong>Creation Mode:</strong> For building and editing your workflow. Here you have full control to add, edit, and delete all content and structure.</li>
            </ul>
        </section>

        <section>
            <h2>2. How to Use Creation Mode</h2>
            <p>Switch to Creation Mode to build your workflow. Here a full suite of editing tools is available.</p>
            
            <h3>Building Your Workflow Hierarchy</h3>
            <ul>
                <li><strong>Add a Role:</strong> Click the large <strong>Add new Role</strong> button at the bottom of the page.</li>
                <li><strong>Add an Action:</strong> In the left pane of a Role, click the green plus icon (<i class="icon-example fa-solid fa-plus"></i>) in the Role's header.</li>
                <li><strong>Add an Evidence:</strong> Select an Action in the left pane. In that Action's header, click the green plus icon (<i class="icon-example fa-solid fa-plus"></i>) to add an Evidence item in the right pane.</li>
                <li><strong>Edit Names:</strong> Click the yellow pencil icon (<i class="icon-example fa-solid fa-pen"></i>) on any Role, Action, or Evidence to change its name.</li>
                <li><strong>Delete Items:</strong> Click the red trash can icon (<i class="icon-example fa-solid fa-trash-can"></i>) on any item. This will permanently delete it and everything inside it.</li>
            </ul>

            <h3>Configuring Evidence</h3>
            <p>Evidence items are the core of the workflow and have several properties you can configure.</p>
            <ul>
                <li><strong>Description:</strong> Each Evidence has a text area for a detailed description of the task or proof required.</li>
                <li><strong>Grading:</strong> In the header of each Evidence, you can assign it a grade from 0.5 to 5.0. This grade represents the weight of that Evidence.</li>
            </ul>
            <div class="note">
                <strong>Important:</strong> For the progress calculations to be accurate, the sum of all Evidence grades under a single Action **should equal 5.0**. If the sum is not 5.0, a validation warning will appear on that Action to alert you.
            </div>

            <h3>Managing Attachments on Evidence</h3>
            <p>Each Evidence item has a footer for adding and managing attachments.</p>
            <ul>
                <li><strong>To Add an Item:</strong> Click the corresponding icon for what you want to add: <i class="fa-solid fa-link"></i> for Links, <i class="fa-solid fa-image"></i> for Images, <i class="fa-solid fa-book-open"></i> for Notes (rich text), or <i class="fa-solid fa-comment"></i> for simple Comments. A form will appear in a modal window.</li>
                <li><strong>To Edit/Delete Multiple Items:</strong> Click the "Manage Attachments" button (<i class="icon-example fa-solid fa-gear"></i>). This opens a modal where you can see all attachments and use the pencil/trash icons to manage them.</li>
            </ul>

            <h3>Saving Your Work</h3>
            <p>After making any changes in Creation Mode, you must save them to the server.</p>
            <div class="note">
                Click the blue <strong><i class="fa-solid fa-cloud-arrow-up"></i> Save Workflow</strong> button. The button will confirm when your `workflow.json` file has been successfully updated.
            </div>
        </section>

        <section>
            <h2>3. How to Use Execution Mode</h2>
            <p>Execution Mode is for performing the workflow. All editing controls are hidden for a clean, focused experience.</p>
            
            <h3>Completing Tasks & Progress</h3>
            <ul>
                <li><strong>Completing Evidence:</strong> Check the box next to an Evidence item to mark it as complete.</li>
                <li><strong>Action Progress:</strong> Each Action in the left pane has a progress bar. This bar fills up based on the grades of the Evidence items you complete for that Action.</li>
                <li><strong>Role Progress:</strong> Each Role has an overall progress bar in its header. This shows the average completion percentage of all its child Actions.</li>
                <li><strong>Sequential Order:</strong> You can enable "Enforce Sequential Order" in Creation Mode. In Execution mode, this will lock all Evidence items except the first uncompleted one, which will be highlighted with a blue border.</li>
            </ul>

            <h3>Viewing Information</h3>
            <ul>
                <li><strong>Evidence Details:</strong> The description for each Evidence item is visible below its title, providing context for the task.</li>
                <li><strong>Attachments:</strong> Click on any Link, Image, Note, or Comment button in the footer to view its content in a large modal window.</li>
            </ul>
        </section>
        
        <hr style="margin-top: 40px;">
        <p style="text-align: center; color: #888;">End of Manual. Happy working!</p>
    </main>
</body>
</html>